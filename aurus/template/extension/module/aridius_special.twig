<div class="title-module">{{ heading_title_special }}</div>
{% if (carusel != '1') %} 
<div id="special-grid" class="bl_margin flex_height_row">
   {% for product in products %} 
   {% if ((product['special'] and product['special_date_end'] > product['special_date_start'])) %} 
   <div class="product-layout {% if (column_left or column_right ) %} nth1 {% else %} nth2 {% endif %} special {% if (column_left or column_right ) %} col-xl-five col-lg-3 col-md-4 col-sm-4 col-xs-6 {% else %} col-xl-2 col-lg-five col-md-3 col-sm-4 col-xs-6 {% endif %}">
      <div class="gtile-i-wrap">
         <div class="gtile-i">
            <div class="gtile-i-box">
               <div class="item_spec caption">
                  <div class="{% if (rat) %}raiting_thumb{% endif %} product-thumb">
                     <div class="box_spec">
                        {% if (rat) %} 
                        <div class="rating rating_sm">
                           {% set i = 1 %}{% for i in i..5 %} 
                           {% if (product['rating'] < i) %} 
                           <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
                           {% else %} 
                           <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
                           {% endif %} 
                           {% endfor %} 
                        </div>
                        {% endif %} 
                        <div class="image"><a href="{{ product['href'] }}"><img src ="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive" /></a></div>
                        <div class="snav en">
                           <ul>
                              {% if (wish) %} 
                              <li>
                                 <a rel="nofollow" onclick="wishlist.add('{{ product['product_id'] }}');">
                                 <i class="fa fa-heart"></i>
                                 <span>{{ button_wishlist }}</span>
                                 </a>
                              </li>
                              {% endif %} 
                              {% if (comp) %} 
                              <li>
                                 <a rel="nofollow" onclick="compare.add('{{ product['product_id'] }}');">
                                 <i class="fa fa-exchange"></i>
                                 <span>{{ button_compare }}</span>
                                 </a>
                              </li>
                              {% endif %} 
                              {% if (quickview) %} 
                              <li>
                                 <a rel="nofollow" onclick="quickview_open('{{ product['product_id'] }}');">
                                 <i class="fa fa-search"></i>
                                 <span>{{ text_quickview }}</span>
                                 </a>
                              </li>
                              {% endif %} 
                           </ul>
                        </div>
         <div class="positionsticker">
                            <!-- special -->
						    {% if (aurus_sticker_sale_product_auto != 1 and product['special'] and product['price_sticker'] != 0) %} 
                            {% set percent = (100 - (product['special_sticker'] / product['price_sticker']) * 100)|round %} 
                            <div class="stickers-special">-{{ percent }}%</div>
                            {% endif %} 
                            <!-- special END -->
                            <!-- new -->
						    {% set startDate1 = (product['dateadded']|slice(0, 10))|date('U') %}
						    {% set endDate2 = ("now"|date("Y/m/d"))|date('U') %}
						    {% set days = ((endDate2 / 86400)|round) - ((startDate1 / 86400)|round) %}
                            {% if (aurus_sticker_new_product_auto != 1 and days < aurus_sticker_product_new_day) %} 
                            <div class="stickers-new">{{ aurus_name_sticker_product_new[language_id] }}</div>
                            {% endif %} 
                            <!-- new END -->
                            <!-- top -->
							{% if (aurus_sticker_top_product_auto != 1 and aurus_sticker_product_top_ratinr == 1 and product['rating'] == aurus_sticker_product_top_rating or aurus_sticker_top_product_auto != 1 and aurus_sticker_product_top_ratinr == 2 and product['viewed'] > aurus_sticker_product_top_viewed) %} 
							<div class="stickers-top">{{ aurus_name_sticker_product_top[language_id] }}</div>
							{% endif %} 
							<!-- top END -->
							{% if (product['stickers2']) %} 
							{% for sticker2 in product['stickers2'] %} 
							<div class="stickers-all" style="color:{{ sticker2['color'] }};background:{{ sticker2['background'] }};">{{ sticker2['name'] }}</div>
							{% endfor %} 
							{% endif %} 
         </div>
                        {% if (rat) %} 
                        <div class="rating rating_lg">
                           {% set i = 1 %}{% for i in i..5 %} 
                           {% if (product['rating'] < i) %} 
                           <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
                           {% else %} 
                           <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
                           {% endif %} 
                           {% endfor %} 
                        </div>
                        {% endif %} 
                        <div class="product-name"><a href="{{ product['href'] }}">
						  {% if (product['name'])|length < aurus_limit_symbolst %} 
						  {{ product['name'] }} 
						  {% else %} 
						  {{ (product['name']|slice(0, aurus_limit_symbolst))~"..." }} 
						  {% endif %} 
                           </a>
                        </div>
                        {% if (product['price']) %} 
                        <p class="price">
                           {% if (not product['special']) %} 
                           {{ product['price'] }} 
                           {% else %} 
                           <span class="price-new">{{ product['special'] }}</span><span class="price-old">{{ product['price'] }}</span>
                           {% endif %} 
                           {% if (product['tax']) %} 
                           <span class="price-tax">{{ text_tax }} {{ product['tax'] }}</span>
                           {% endif %} 
                        </p>
                        {% endif %} 
                        <div class="text_special">{{ end_special }}</div>
                        <div class="text_special2">{{ end_special2 }}</div>
                        <div class="special-timer-all">
                           <div class = "special-timere-zone">
                              <div id = "time_out_{{ product['product_id'] }}"></div>
                           </div>
                        </div>
         {% set date_out = ((product['special_date_end'])|date('Y, m, d')) %}
 
                        <script><!--
                           function get_timer_{{ product['product_id'] }}() {
                           var timeend= new Date();
                           timeend = new Date({{ date_out }});
                           var day = new Date();
                           day.setMonth(day.getMonth() + 1);
                           day = Math.floor((timeend-day)/1000);
                           var sec=day%60; day=Math.floor(day/60);
                           var min=day%60; day=Math.floor(day/60);
                           var hour=day%24; day=Math.floor(day/24);
                           if(day<10)day='0'+day;
                           if(hour<10)hour='0'+hour;
                           if(min<10)min='0'+min;
                           if(sec<10)sec='0'+sec;
                           var timestr =  "<div class='countdown'><div class='day'><span class='num'>" +day+ "</span><span class='word'>{{ day }}</span></div><span class='special-timer-line'>&ndash;</span><div class='hour'><span class='num'>" +hour+ "</span><span class='word'>{{ hour }}</span></div><span class='special-timer-line'>&ndash;</span><div class='min'><span class='num'>" +min+ "</span><span class='word'>{{ minute }}</span></div><span class='special-timer-line'>&ndash;</span><div class='sec'><span class='num'>" +sec+ "</span><span class='word'>{{ second }}</span></div></div>";
						   document.getElementById('time_out_{{ product['product_id'] }}').innerHTML=timestr;
                           setTimeout(get_timer_{{ product['product_id'] }},1000);
                           }
                           get_timer_{{ product['product_id'] }}()
                           //-->
                        </script>
                        <div class="cart">
                           {% if (product['quantity'] <= 0 and aridiusinstock_status ) %} 
                           <button type="button" class="btn-instock" onclick="instock.add('{{ product['product_id'] }}');" data-product-id=" {{ product['product_id'] }}">{{ button_instock }}</button>
                           {% else %} 
                           <button type="button" class="btn-cart" onclick="cart.add('{{ product['product_id'] }}');"><i class="fa fa-shopping-cart"></i> {{ button_cart }}</button>
                           {% endif %} 
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   {% endif %} 
   {% endfor %} 
</div>
<div class="clearfix"></div>
<script>
   $(document).ready(function () {
   var size_li_spec = $("#special-grid > div").size();
   var li_element_spec  = {% if (column_left or column_right ) %}5{% else %}6{% endif %};
   if(li_element_spec !=size_li_spec){
   $( ".product-layout.special:nth-child({% if (column_left or column_right ) %}5{% else %}6{% endif %}n):not(:last-child)" ).append('<div class="gridcount special"><i class="gridcount_load fa fa-refresh fa-lg"></i><span class="gridcount2">{{ button_load }}</span></div>');
   $(".product-layout.special:nth-child({% if (column_left or column_right ) %}5{% else %}6{% endif %}n):not(:last-child)").addClass("special_box quickview_hidden");
   }
   $('#special-grid > div:lt('+li_element_spec+')').fadeIn('slow');
   $('.gridcount.special').click(function () {
   var bLazy = new Blazy()
   $(this).remove();
   $('.special_box.quickview_hidden').first().removeClass('quickview_hidden')
   if(li_element_spec==size_li_spec){
   $('.btn.btn-default.gridcount.special').remove();
   }else{
   li_element_spec = (li_element_spec+{% if (column_left or column_right ) %}5{% else %}6{% endif %} <= size_li_spec) ? li_element_spec+{% if (column_left or column_right ) %}5{% else %}6{% endif %} : size_li_spec;
   $('#special-grid > div:lt('+li_element_spec+')').fadeIn('slow');
   }
   $("#sticky_item").trigger("sticky_kit:recalc"); // пересчет affix
   });
   });
</script>
{% else %} 
<div id="special_carusel{{ module }}" class="swiper-container">
   <div class="swiper-wrapper">
      {% for product in products %} 
      {% if ((product['special'] and product['special_date_end'] > product['special_date_start'])) %} 
      <div class="swiper-slide product-layout_carusel">
         <div class="item_spec caption">
            <div class="{% if (rat) %}raiting_thumb{% endif %} product-thumb">
               <div class="box_spec">
                  {% if (rat) %} 
                  <div class="rating rating_sm">
                     {% set i = 1 %}{% for i in i..5 %} 
                     {% if (product['rating'] < i) %} 
                     <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
                     {% else %} 
                     <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
                     {% endif %} 
                     {% endfor %} 
                  </div>
                  {% endif %} 
                  <div class="image"><a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive" /></a></div>
                  <div class="snav en">
                     <ul>
                        {% if (wish) %} 
                        <li>
                           <a rel="nofollow" onclick="wishlist.add('{{ product['product_id'] }}');">
                           <i class="fa fa-heart"></i>
                           <span>{{ button_wishlist }}</span>
                           </a>
                        </li>
                        {% endif %} 
                        {% if (comp) %} 
                        <li>
                           <a rel="nofollow" onclick="compare.add('{{ product['product_id'] }}');">
                           <i class="fa fa-exchange"></i>
                           <span>{{ button_compare }}</span>
                           </a>
                        </li>
                        {% endif %} 
                        {% if (quickview) %} 
                        <li>
                           <a rel="nofollow" onclick="quickview_open('{{ product['product_id'] }}');">
                           <i class="fa fa-search"></i>
                           <span>{{ text_quickview }}</span>
                           </a>
                        </li>
                        {% endif %} 
                     </ul>
                  </div>
         <div class="positionsticker">
                            <!-- special -->
						    {% if (aurus_sticker_sale_product_auto != 1 and product['special'] and product['price_sticker'] != 0) %} 
                            {% set percent = (100 - (product['special_sticker'] / product['price_sticker']) * 100)|round %} 
                            <div class="stickers-special">-{{ percent }}%</div>
                            {% endif %} 
                            <!-- special END -->
                            <!-- new -->
						    {% set startDate1 = (product['dateadded']|slice(0, 10))|date('U') %}
						    {% set endDate2 = ("now"|date("Y/m/d"))|date('U') %}
						    {% set days = ((endDate2 / 86400)|round) - ((startDate1 / 86400)|round) %}
                            {% if (aurus_sticker_new_product_auto != 1 and days < aurus_sticker_product_new_day) %} 
                            <div class="stickers-new">{{ aurus_name_sticker_product_new[language_id] }}</div>
                            {% endif %} 
                            <!-- new END -->
                            <!-- top -->
							{% if (aurus_sticker_top_product_auto != 1 and aurus_sticker_product_top_ratinr == 1 and product['rating'] == aurus_sticker_product_top_rating or aurus_sticker_top_product_auto != 1 and aurus_sticker_product_top_ratinr == 2 and product['viewed'] > aurus_sticker_product_top_viewed) %} 
							<div class="stickers-top">{{ aurus_name_sticker_product_top[language_id] }}</div>
							{% endif %} 
							<!-- top END -->
							{% if (product['stickers2']) %} 
							{% for sticker2 in product['stickers2'] %} 
							<div class="stickers-all" style="color:{{ sticker2['color'] }};background:{{ sticker2['background'] }};">{{ sticker2['name'] }}</div>
							{% endfor %} 
							{% endif %} 
         </div>
                  {% if (rat) %} 
                  <div class="rating rating_lg">
                     {% set i = 1 %}{% for i in i..5 %} 
                     {% if (product['rating'] < i) %} 
                     <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
                     {% else %} 
                     <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
                     {% endif %} 
                     {% endfor %} 
                  </div>
                  {% endif %} 
                  <div class="product-name"><a href="{{ product['href'] }}">
						  {% if (product['name'])|length < aurus_limit_symbolst %} 
						  {{ product['name'] }} 
						  {% else %} 
						  {{ (product['name']|slice(0, aurus_limit_symbolst))~"..." }} 
						  {% endif %} 
                     </a>
                  </div>
                  {% if (product['price']) %} 
                  <p class="price">
                     {% if (not product['special']) %} 
                     {{ product['price'] }} 
                     {% else %} 
                     <span class="price-new">{{ product['special'] }}</span><span class="price-old">{{ product['price'] }}</span>
                     {% endif %} 
                     {% if (product['tax']) %} 
                     <span class="price-tax">{{ text_tax }} {{ product['tax'] }}</span>
                     {% endif %} 
                  </p>
                  {% endif %} 
                  <div class="text_special">{{ end_special }}</div>
                  <div class="text_special2">{{ end_special2 }}</div>
                  <div class="special-timer-all">
                     <div class = "special-timere-zone">
                        <div id = "time_out_{{ product['product_id'] }}"></div>
                     </div>
                  </div>
                         {% set date_out = ((product['special_date_end'])|date('Y, m, d')) %}
 
                  <script><!--
                     function get_timer_{{ product['product_id'] }}() {
                     var timeend= new Date();
                     timeend = new Date({{ date_out }});
                     var day = new Date();
                     day.setMonth(day.getMonth() + 1);
                     day = Math.floor((timeend-day)/1000);
                     var sec=day%60; day=Math.floor(day/60);
                     var min=day%60; day=Math.floor(day/60);
                     var hour=day%24; day=Math.floor(day/24);
                     if(day<10)day='0'+day;
                     if(hour<10)hour='0'+hour;
                     if(min<10)min='0'+min;
                     if(sec<10)sec='0'+sec;
                     var timestr =  "<div class='countdown'><div class='day'><span class='num'>" +day+ "</span><span class='word'>{{ day }}</span></div><span class='special-timer-line'>&ndash;</span><div class='hour'><span class='num'>" +hour+ "</span><span class='word'>{{ hour }}</span></div><span class='special-timer-line'>&ndash;</span><div class='min'><span class='num'>" +min+ "</span><span class='word'>{{ minute }}</span></div><span class='special-timer-line'>&ndash;</span><div class='sec'><span class='num'>" +sec+ "</span><span class='word'>{{ second }}</span></div></div>";
					 document.getElementById('time_out_{{ product['product_id'] }}').innerHTML=timestr;
                     setTimeout(get_timer_{{ product['product_id'] }},1000);
                     }
                     get_timer_{{ product['product_id'] }}()
                     //-->
                  </script>
                  <div class="cart">
                     {% if (product['quantity'] <= 0 and aridiusinstock_status ) %} 
                     <button type="button" class="btn-instock" onclick="instock.add('{{ product['product_id'] }}');" data-product-id=" {{ product['product_id'] }}">{{ button_instock }}</button>
                     {% else %} 
                     <button type="button" class="btn-cart" onclick="cart.add('{{ product['product_id'] }}');"><i class="fa fa-shopping-cart"></i> {{ button_cart }}</button>
                     {% endif %} 
                  </div>
               </div>
            </div>
         </div>
      </div>
      {% endif %} 
      {% endfor %} 
   </div>
   {% if (navigation) %} 
   <div class="#special_carusel{{ module }} swiper-button-next"><i class="fa fa-chevron-right fa-5x"></i></div>
   <div class="#special_carusel{{ module }} swiper-button-prev"><i class="fa fa-chevron-left fa-5x"></i></div>
   {% endif %} 
</div>
<script><!--
   $(document).ready(function () {
   var ocSwiper = new Swiper('#special_carusel{{ module }}.swiper-container', {
   slidesPerView: {{ items }},
   mode: 'horizontal',
   pagination: false,
   speed: {{ rew_speed }},
   {% if (autoplay_on) %} 
   autoplay: {delay: {{ autoplay }}},
   autoplayDisableOnInteraction: true,
   {% endif %} 
   breakpoints: {
   768: {
   slidesPerView: 2,
   },
   992: {
   slidesPerView: 3,
   },
   1200: {
   slidesPerView: {% if (column_left or column_right ) %} 3 {% else %} 4 {% endif %},
   },
   1600: {
   slidesPerView: {% if (column_left or column_right ) %} 4 {% else %} 5 {% endif %},
   }
   },
   {% if (navigation) %} 
   navigation: {
   nextEl: '#special_carusel{{ module }} .swiper-button-next',
   prevEl: '#special_carusel{{ module }} .swiper-button-prev',
   },
   {% endif %} 
   });
   {% if (stophover and autoplay_on) %} 
   $("#special_carusel{{ module }}.swiper-container").hover(function() {
   ocSwiper.autoplay.stop();
   }, function() {
   ocSwiper.autoplay.start();
   });
   {% endif %} 
   });
   -->
</script>
{% endif %} 
